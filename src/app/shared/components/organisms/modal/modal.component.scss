/* modal.component.scss */
@use 'abstracts/variables' as *;

.modal-backdrop {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(1, 48, 71, 0.6); // Usando primary-dark com opacidade
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1050;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;

    &.show {
        opacity: 1;
        visibility: visible;

        .modal-dialog {
            transform: scale(1);
            opacity: 1;
        }
    }
}

.modal-dialog {
    background: var(--white);
    border-radius: $border-radius-md; // 12px do design system
    box-shadow: 0 10px 25px rgba(1, 48, 71, 0.15); // Sombra com primary-dark
    max-height: 90vh;
    overflow: hidden;
    transform: scale(0.9);
    opacity: 0;
    transition: transform 0.3s ease, opacity 0.3s ease;
    margin: 1rem;
    border: 1px solid var(--stroke);

    // Tamanhos do modal
    &.modal-sm {
        max-width: 300px;
        width: 100%;
    }

    &.modal-md {
        max-width: 500px;
        width: 100%;
    }

    &.modal-lg {
        max-width: 800px;
        width: 100%;
    }

    &.modal-xl {
        max-width: 1140px;
        width: 100%;
    }

    &.modal-fullscreen {
        max-width: none;
        width: 95vw;
        height: 95vh;
        max-height: none;
        margin: 2.5vh 2.5vw;
    }
}

.modal-content {
    display: flex;
    flex-direction: column;
    height: 100%;
}

.modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: $padding-sm $padding-md; // 20px 24px do design system
    border-bottom: 1px solid var(--stroke);
    background-color: var(--background);

    .modal-title {
        margin: 0;
        font-size: 1.25rem;
        font-weight: 600;
        color: var(--primary-dark);
        font-family: "Inter", sans-serif;
    }

    .modal-close-btn {
        background: none;
        border: none;
        padding: $padding-xs; // 8px
        cursor: pointer;
        border-radius: $border-radius-sm; // 8px
        display: flex;
        align-items: center;
        justify-content: center;
        width: 2rem;
        height: 2rem;
        transition: all 0.2s ease;

        &:hover {
            background-color: var(--stroke);
        }

        &:focus {
            outline: 2px solid var(--primary-medium);
            outline-offset: 2px;
        }
    }
}

.modal-body {
    padding: $padding-md; // 24px
    flex: 1;
    overflow-y: auto;
    background-color: var(--white);

    // Usando a scrollbar customizada do sistema
    scrollbar-width: thin;
    scrollbar-color: rgba(1, 48, 71, 0.3) transparent;

    &::-webkit-scrollbar {
        width: 6px;
        height: 6px;
    }

    &::-webkit-scrollbar-track {
        background: transparent;
    }

    &::-webkit-scrollbar-thumb {
        background-color: rgba(1, 48, 71, 0.3);
        border-radius: 999px;
        border: 2px solid transparent;
        background-clip: content-box;

        &:hover {
            background-color: rgba(1, 48, 71, 0.5);
        }
    }
}

// Responsividade
@media (max-width: 768px) {
    .modal-dialog {
        margin: $padding-xs; // 8px

        &.modal-sm,
        &.modal-md,
        &.modal-lg,
        &.modal-xl {
            max-width: none;
            width: calc(100vw - #{$padding-sm}); // Usando variável do sistema
        }

        &.modal-fullscreen {
            width: 100vw;
            height: 100vh;
            margin: 0;
            border-radius: 0;
        }
    }

    .modal-header {
        padding: $padding-sm; // 20px do sistema

        .modal-title {
            font-size: 1.125rem;
        }
    }

    .modal-body {
        padding: $padding-sm; // 20px do sistema
    }
}

// Animações seguindo o padrão do sistema
@keyframes modalFadeIn {
    from {
        opacity: 0;
        transform: scale(0.9);
    }

    to {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes modalFadeOut {
    from {
        opacity: 1;
        transform: scale(1);
    }

    to {
        opacity: 0;
        transform: scale(0.9);
    }
}

// Acessibilidade
@media (prefers-reduced-motion: reduce) {

    .modal-backdrop,
    .modal-dialog {
        transition: none;
    }
}

// Estado de foco para acessibilidade usando cores do sistema
.modal-dialog:focus {
    outline: 2px solid var(--primary-medium);
    outline-offset: 2px;
}