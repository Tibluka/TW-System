<div class="clients-container">
    <!-- Header da página -->
    <div class="page-header mb-24">
        <h2>Gerenciamento de Clientes</h2>
        <p class="page-subtitle">Cadastre e gerencie seus clientes de forma eficiente</p>
    </div>

    <form [formGroup]="clientForm" (ngSubmit)="submit()" class="client-form">

        <!-- Primeira linha: Nome e Email -->
        <div class="form-row">
            <ds-input [fullWidth]="true" label="Nome Completo" placeholder="Digite o nome completo do cliente"
                formControlName="name" [required]="true" [invalid]="isFormControlInvalid(clientForm.controls['name'])"
                errorMessage="Nome é obrigatório" icon="fa-solid fa-user" iconPosition="left" />

            <ds-input [fullWidth]="true" label="Email" placeholder="cliente@empresa.com" type="email"
                formControlName="email" [required]="true" [invalid]="isFormControlInvalid(clientForm.controls['email'])"
                errorMessage="Email válido é obrigatório" icon="fa-solid fa-envelope" iconPosition="left" />
        </div>

        <!-- Segunda linha: Telefone e Empresa -->
        <div class="form-row">
            <ds-input [fullWidth]="true" label="Telefone" placeholder="(11) 99999-9999" formControlName="phone"
                icon="fa-solid fa-phone" iconPosition="left" mask="(00) 00000-0000" />

            <ds-input [fullWidth]="true" label="Empresa" placeholder="Nome da empresa" formControlName="company"
                icon="fa-solid fa-building" iconPosition="left" />
        </div>

        <!-- Terceira linha: Categoria e Status -->
        <div class="form-row">
            <ds-select [fullWidth]="true" label="Categoria do Cliente" placeholder="Selecione a categoria"
                formControlName="category" [required]="true"
                [invalid]="isFormControlInvalid(clientForm.controls['category'])" errorMessage="Categoria é obrigatória"
                [options]="categoryOptions" icon="fa-solid fa-tags" iconPosition="left" [clearable]="true"
                (selectionChanged)="onCategoryChange($event)">
            </ds-select>

            <ds-select [fullWidth]="true" label="Status" placeholder="Selecione o status" formControlName="status"
                [options]="statusOptions" icon="fa-solid fa-circle-dot" iconPosition="left">
            </ds-select>
        </div>

        <!-- Quarta linha: Tags e País -->
        <div class="form-row">
            <ds-select [fullWidth]="true" label="Tags" placeholder="Selecione as tags" formControlName="tags"
                [options]="tagOptions" [multiple]="true" [clearable]="true" [searchable]="true"
                icon="fa-solid fa-hashtag" iconPosition="left" helperText="Você pode selecionar múltiplas tags"
                (selectionChanged)="onTagsChange($event)">
            </ds-select>

            <ds-select [fullWidth]="true" label="País" placeholder="Selecione o país" formControlName="country"
                [options]="countryOptions" [searchable]="true" [clearable]="true" icon="fa-solid fa-globe"
                iconPosition="left" helperText="Digite para buscar países">
            </ds-select>
        </div>

        <!-- Campo Observações -->
        <ds-textarea [fullWidth]="true" label="Observações" placeholder="Informações adicionais sobre o cliente..."
            formControlName="notes" [rows]="4" helperText="Máximo de 500 caracteres" />

        <!-- Botões de ação -->
        <div class="form-actions">
            <ds-button variant="outline" label="Limpar Formulário" icon="fa-solid fa-eraser" type="button"
                (onClickEmitter)="clientForm.reset()" />

            <ds-button variant="fill" label="Salvar Cliente" icon="fa-solid fa-save" type="submit" />
        </div>
    </form>

    <ds-card>
        <h1>Exemplo de card</h1>
    </ds-card>

    <div class="clients-container">
        <h2>Lista de Clientes</h2>

        <ds-table>
            <!-- Header -->
            <ds-table-row [isHeader]="true">
                <ds-table-cell [isHeader]="true" align="left">Nome</ds-table-cell>
                <ds-table-cell [isHeader]="true" align="left">Email</ds-table-cell>
                <ds-table-cell [isHeader]="true" align="center">Status</ds-table-cell>
                <ds-table-cell [isHeader]="true" align="center">Ações</ds-table-cell>
            </ds-table-row>

            <!-- Dados -->
            <ds-table-row *ngFor="let client of clients" [clickable]="true" [data]="client"
                (rowClick)="onClientClick($event)">

                <ds-table-cell align="left">
                    <div class="user-info">
                        <img [src]="client.avatar" [alt]="client.name" class="avatar" />
                        <div>
                            <strong>{{ client.name }}</strong>
                            <small class="company">{{ client.company }}</small>
                        </div>
                    </div>
                </ds-table-cell>

                <ds-table-cell align="left">
                    <a [href]="'mailto:' + client.email">{{ client.email }}</a>
                </ds-table-cell>

                <ds-table-cell align="center">
                    <span [class]="'status-badge status-' + client.status">
                        {{ client.status }}
                    </span>
                </ds-table-cell>

                <ds-table-cell align="center">
                    <div class="actions">
                        <ds-button variant="ghost" icon="fa-solid fa-edit" (onClickEmitter)="editClient(client)">
                        </ds-button>
                        <ds-button variant="ghost" icon="fa-solid fa-trash" (onClickEmitter)="deleteClient(client)">
                        </ds-button>
                    </div>
                </ds-table-cell>
            </ds-table-row>
        </ds-table>
    </div>

</div>